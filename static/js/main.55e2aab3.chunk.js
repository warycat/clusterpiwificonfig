(this.webpackJsonpclusterpiwificonfig=this.webpackJsonpclusterpiwificonfig||[]).push([[0],{68:function(e,t,n){e.exports=n(84)},73:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var r,a,i,c,o,s,l,u,p,d,h,f,b=n(0),m=n.n(b),v=n(10),w=n.n(v),g=(n(73),n(15)),y=n.n(g),O=n(19),j=n(17),E=n(30),k=n(31),x=n(16),S=(n(46),n(6)),C=n(58),P=(r=function(){function e(t){Object(E.a)(this,e),Object(j.a)(this,"connected",a,this),Object(j.a)(this,"log",i,this),this.device=t}return Object(k.a)(e,[{key:"init",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.device.gatt.connect();case 3:return this.server=e.sent,this.connected=this.device.gatt.connected,e.next=7,this.server.getPrimaryService("6e400001-b5a3-f393-e0a9-e50e24dcca9e");case 7:return this.service=e.sent,e.next=10,this.service.getCharacteristic("6e400003-b5a3-f393-e0a9-e50e24dcca9e");case 10:return this.tx=e.sent,this.tx.startNotifications(),this.tx.addEventListener("characteristicvaluechanged",(function(e){return t.onTx(e.target.value)})),e.next=15,this.service.getCharacteristic("6e400002-b5a3-f393-e0a9-e50e24dcca9e");case 15:return this.rx=e.sent,e.abrupt("return",this);case 19:e.prev=19,e.t0=e.catch(0),console.log("error"),console.log(e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"onTx",value:function(e){for(var t=[],n=0;n<e.byteLength;n++)t[n]=e.getUint8(n);var r=String.fromCharCode.apply(null,t);this.log+=r,console.log(r)}},{key:"send",value:function(e){try{var t=new TextEncoder;this.rx.writeValue(t.encode(e))}catch(n){console.log(n)}}}]),e}(),a=Object(x.a)(r.prototype,"connected",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(x.a)(r.prototype,"log",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r),z=(c=function(){function e(){Object(E.a)(this,e),Object(j.a)(this,"dict",o,this)}return Object(k.a)(e,[{key:"scan",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Requesting Bluetooth Device..."),e.next=4,navigator.bluetooth.requestDevice({filters:[{name:"rpi-gatt-server"}],optionalServices:["6e400001-b5a3-f393-e0a9-e50e24dcca9e"]});case 4:t=e.sent,n=new P(t),this.dict.set(n.device.id,n),n.init(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(C.a)(this.dict.values());try{for(t.s();!(n=t.n()).done;)n.value.send(D.script)}catch(r){t.e(r)}finally{t.f()}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(O.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in this.dict)(n=this.dict[t]).gatt.connected&&(n.gatt.disconnect(),console.log("Disconnected"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"n",get:function(){return Object.keys(this.dict).length}}]),e}(),o=Object(x.a)(c.prototype,"dict",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Object(x.a)(c.prototype,"n",[S.computed],Object.getOwnPropertyDescriptor(c.prototype,"n"),c.prototype),c),W=new(s=function(){function e(){var t=this;Object(E.a)(this,e),Object(j.a)(this,"open",l,this),Object(j.a)(this,"curSsid",u,this),Object(j.a)(this,"curPassword",p,this),Object(j.a)(this,"newSsid",d,this),Object(j.a)(this,"newPassword",h,this),Object(j.a)(this,"cluster",f,this),this.handleClickOpen=function(){t.newSsid=t.curSsid,t.newPassword=t.curPassword,t.open=!0},this.handleClose=function(e){t.open=!1},this.handleConfirm=function(e){t.curSsid=t.newSsid,t.curPassword=t.newPassword,t.open=!1},this.handleScan=function(){var e=Object(O.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cluster.scan();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleSend=function(){var e=Object(O.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cluster.send();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(k.a)(e,[{key:"script",get:function(){return"wpa_passphrase ".concat(this.curSsid," ").concat(this.curPassword)}}]),e}(),l=Object(x.a)(s.prototype,"open",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(x.a)(s.prototype,"curSsid",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Office"}}),p=Object(x.a)(s.prototype,"curPassword",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"12345678"}}),d=Object(x.a)(s.prototype,"newSsid",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=Object(x.a)(s.prototype,"newPassword",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(x.a)(s.prototype,"cluster",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z}}),Object(x.a)(s.prototype,"script",[S.computed],Object.getOwnPropertyDescriptor(s.prototype,"script"),s.prototype),s);window.S=W;var D=W,B=n(28),F=n(138),L=n(139),N=n(85),R=n(86),T=n(140),q=n(57),A=n.n(q),G=n(141),I=n(137),J=n(144),M=n(132),U=n(131),V=n(130),$=n(142),_=Object(B.a)((function(){return m.a.createElement(J.a,{id:"dialog",open:D.open,onClose:function(){D.open=!1},"aria-labelledby":"form-dialog-title"},m.a.createElement(V.a,{id:"form-dialog-title"},"WiFi"),m.a.createElement(U.a,null,m.a.createElement($.a,{autoFocus:!0,margin:"dense",id:"ssid",label:"SSID",type:"text",fullWidth:!0,value:D.newSsid,onChange:function(e){D.newSsid=e.target.value}}),m.a.createElement($.a,{margin:"dense",id:"password",label:"PASSWORD",type:"password",fullWidth:!0,value:D.newPassword,onChange:function(e){D.newPassword=e.target.value}})),m.a.createElement(M.a,null,m.a.createElement(R.a,{onClick:function(){D.open=!1},color:"primary"},"Cancel"),m.a.createElement(R.a,{onClick:function(){D.open=!1},color:"primary"},"Confirm")))})),H=n(134),K=n(136),Q=n(135),X=n(133),Y=Object(B.a)((function(e){var t=e.pi;return m.a.createElement(X.a,{item:!0,xs:4},m.a.createElement(H.a,{style:{margin:10,borderColor:t.connected?"green":"red"},variant:"outlined"},m.a.createElement(Q.a,null,m.a.createElement(N.a,{variant:"h5",component:"h2"},t.device.name),m.a.createElement(N.a,{style:{color:t.connected?"green":"red"},variant:"body2",component:"h2"},t.connected?"connected":"connecting"),m.a.createElement("pre",{style:{height:"200px",width:"100%",overflow:"scroll"}},t.log)),m.a.createElement(K.a,null,m.a.createElement(R.a,{size:"small",onClick:function(){return t.send(D.script)}},"Send"))))})),Z=Object(B.a)((function(){return m.a.createElement(X.a,{container:!0},Object(S.values)(D.cluster.dict).map((function(e,t){return m.a.createElement(Y,{key:t,pi:e})})))})),ee=Object(I.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),te=Object(B.a)((function(){var e=ee();return m.a.createElement(m.a.Fragment,null,m.a.createElement(F.a,{position:"static"},m.a.createElement(L.a,null,m.a.createElement(T.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},m.a.createElement(A.a,null)),m.a.createElement(N.a,{variant:"h6",className:e.title},"Cluster Pi WiFi Config"),m.a.createElement(G.a,{color:"primary","aria-label":"outlined primary button group"},m.a.createElement(R.a,{variant:"outlined",color:"inherit",onClick:D.handleSend},"Send All"),m.a.createElement(R.a,{variant:"outlined",color:"inherit",onClick:D.handleScan},"BLE Scan"),m.a.createElement(R.a,{variant:"outlined",color:"inherit",onClick:D.handleClickOpen},"WiFi Config")))),m.a.createElement(_,null),m.a.createElement(Z,null))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(81);w.a.render(m.a.createElement(m.a.StrictMode,null,m.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.55e2aab3.chunk.js.map